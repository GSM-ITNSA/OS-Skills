# SSL&TLS

## SSL(Secure Sockets Layer) 란 ?
```
원래 웹에서의 데이터는 가로채면 누구나 읽을 수 있는 일반 텍스트 형태로 전송 되었다.
이러한 문제 때문에 인터넷 통신의 개인정보 보호, 인증, 데이터 무결성을 보장하기 위해 SSL 을 개발 했다.

컴퓨터 네트워크를 통해 통신 보안을 제공하는 C 언어로 작성된 암호화 프로토콜이다.
암호화를 사용하여 데이터의 무결성과 기밀성을 보호한다.
```
- 암호화 기반 인터넷 보안 프로토콜
- 전달되는 모든 데이터를 암호화하고 특정한 유형의 사이버 공격도 차단한다.
- SSL/TLS 를 사용하는 웹사이트 URL은 HTTP 대신 HTTPS가 사용된다.
- SSL은 TLS 암호화의 이전 버전이다. SSL 3.0 이후 업데이트 되지 않았으며, 앞으로 사라지게 될 것으로 여겨지고 있다. 또한 알려진 취약성이 여러가지 있어 사용 중단을 권장하고 있다.

## TLS(Transport Layer Security) 란 ?
```
SSL의 업데이트 버전으로 SSL의 최종버전인 3.0과 TLS의 최초 버전의 차이는 크지 않다
결과적으로 TLS는 SSL의 업데이트 버전이며 명칭만 다르다고 볼 수 있다.

인터넷을 통한 보안 통신을 위한 표준이다.
클라이언트/서버 애플리케이션이 도청 및 정보변조를 방지하도록 설계된 방식으로 네트워크를 통해 통신할 수 있도록 한다.
```

## mTLS 란 ?
```
상호 인증을 위한 방법이다. mTLS는 네트워크 연결의 양쪽 끝에 있는 양 당사자가 올바른 개인 키를 가지고 있는지 확인하여 그들이 주장하는 당사자인지 확인한다.
```

## SSL/TLS 인증서가 필요한 이유
```
SSL/TLS 인증서는 웹사이트와 사용자 간에 전송되는 데이터를 암호화 한다.
전송하는 모든 정보는 안전하게 보호되며 다른 사람이 볼 수 없습니다.

SSL/TLS 인증서가 없으면 웹사이트와 동일한 네트워크에 있는 모든 사람이 서버와 사용자의 웹 브라우저 간의 트래픽을 가로챌 수 있습니다.
이렇게 하면 교환되는 모든 정보를 볼 수 있으며 심지어 정보를 전송하기 전에 정보를 변경할 수도 있습니다.

간단히 말하면 사용자와 웹사이트 간에 모든 통신을 암호화 함으로써 다른 사용자의 트래픽 탈취를 방지할 수 있다.
```

## 동작 원리 
```
SSL/TLS는 클라이언트와 서버 간에 통신에서 지원 가능 알고리즘 교환, 키 교환 및 인증, 대칭키 암호로 암호화하고 메시지 인증 단계를 거친다.

클라이언트와 서버는 서로 상호작용하여 사용할 알고리즘과 키를 협상하고, 상호 인증을 수행한다.

암호화된 연결이 설정되면, 데이터는 암호화되어 전송되어 중간에 데이터를 가로채거나 변조하는걸 예방한다.
```
1. 핸드셰이크 (HandShake) - 현재 많이 쓰이는 TLS 1.2 버전을 기준으로 하겠습니다.
    ```
    클라이언트와 서버는 핸드셰이크 프로세스를 통해 서로 신원을 확인하고 통신에 필요한 암호화 알고리즘과 키를 협상한다.

    다음과 같은 단계로 이루어 진다. (TCP 3way-handshake 를 진행후 이뤄진다.)

    1. Client Hello
        - 클라이언트가 서버에게 통신을 시작하고자 할 때, 클라이언트는 "ClientHello" 메시지를 서버에게 보낸다.
        - 이 메시지에는 클라이언트가 지원하는 SSL/TLS 버전, 암호화 알고리즘 목록, 난수, 기타 설정 정보가 포함된다.

    2. Server Hello
        - 서버는 클라이언트의 "ClientHello"를 받으면, 서버가 지원하는 SSL/TLS 버전 중에서 하나를 선택하고, 암호화 알고리즘 및 서버의 디지털 인증서를 클라이언트에게 보내는 "ServerHello" 메시지를 생성하여 응답한다.
        - 서버는 또한 자체적으로 난수를 생성하여 클라이언트에게 보냅니다.

    3. Certificate Exchange
        - 서버는 "ServerHello"에 포함된 디지털 인증서를 클라이언트에게 보냅니다. 이 인증서는 서버의 공개 키를 포함하고, 클라이언트는 이를 사용하여 서버의 신원을 확인할 수 있다.
        - 클라이언트는 서버의 인증서를 신뢰할 수 있는 CA의 인증서 목록과 비교하여 유효성을 검증한다.

    4. Key Exchange 
        - 클라이언트와 서버는 핸드셰이크의 일환으로 키 교환을 수행한다.
        - 이 단계에서는 클라이언트 및 서버가 사용할 대칭키(세션 키)를 생성하고 교환한다.
        -이 대칭키는 암호화 및 복호화에 사용되며, 이후의 통신은 이 키를 기반으로 이루어진다.

    5. Finished
        - 클라이언트와 서버는 핸드셰이크가 완료되었음을 서로에게 알리는 "Finished" 메시지를 교환합니다. 이 메시지는 이후의 데이터 전송이 암호화되어야 함을 나타낸다.
    ```